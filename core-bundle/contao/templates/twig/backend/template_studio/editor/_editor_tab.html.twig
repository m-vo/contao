<div class="tab-panel" data-contao--tabs-target="tab" data-label="{{ identifier }}"
     id="template-studio--tab_{{ identifier }}" data-component-url="{{ reference }}">
    {# Actions #}
    {% if actions %}
        <div class="actions">
            {% for action in actions %}
                {% include '@Contao/backend/template_studio/editor/action/_action_button.html.twig' with {identifier, action} only %}
            {% endfor %}
        </div>
    {% endif %}

    {# Editor listing #}
    {% for template in templates %}
        {# Editor #}
        {% set template_attributes = attrs()
            .addClass('template')
            .addClass('editable', can_edit and loop.first)
        %}
        <div{{ template_attributes }}>
            {% set template_editor_id = 'template-studio--editor_' ~ loop.index %}

            {# Label #}
            <label for="{{ template_editor_id }}">
                {% include '@Contao/backend/template_studio/_template_name_structure.html.twig' with template only %}
            </label>

            {% include '@Contao/backend/template_studio/_template_badges.html.twig' with {
                badges: [
                    template.namespace == 'Contao_Global' ? 'user' : null,
                    loop.last ? 'origin' : null,
                ]|filter(e => e is not null)
            } %}

            {# Source #}
            <div class="editor" data-contao--template-studio-target="editor">
                {% set template_editor_attributes = attrs()
                    .set('id', template_editor_id)
                    .set('data-name', template.name)
                    .set('readonly', not (can_edit and loop.first))
                %}
                <textarea{{ template_editor_attributes }}>{{ template.code }}</textarea>
            </div>

            {# Filename #}
            <p class="template--path tl_help tl_tip">{{ template.path }}</p>
        </div>

        {# Arrow #}
        {% if not loop.last %}
            <div class="relation">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                     class="lucide lucide-move-down">
                    <path d="M8 18L12 22L16 18"></path>
                    <path d="M12 2V22"></path>
                </svg>
            </div>
        {% endif %}
    {% endfor %}
</div>

